@{
    ViewBag.Title = "Index";
}
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="~/css/costom.css" rel="stylesheet" type="text/css" />
<script src="~/Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#txtUserName').focus();            
                $.ajax({
                    url: 'http://localhost:5266/api/map',
                    type: 'GET',
                    dataType: 'json',

                    success: function (data) {
                        var mapOptions = {
                            center: new google.maps.LatLng(data[0].Latitute, data[0].Longitude),
                            zoom: 8,
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                        };

                        var infoWindow = new google.maps.InfoWindow();
                        var map = new google.maps.Map(document.getElementById("dvMap"), mapOptions);
                        for (var i = 0; i < data.length; i++)
                        {                                                  
                            var myLatlng = new google.maps.LatLng(data[i].Latitute, data[i].Longitude);
                            var marker = new google.maps.Marker({
                                position: myLatlng,
                                map: map,
                                title: data[i].Name
                            });
                            (function (marker, data) {
                                google.maps.event.addListener(marker, "click", function (e) {
                                    infoWindow.setContent(data.Description);
                                    infoWindow.open(map, marker);
                                });
                            })(marker, data);                           
                        }
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });            
        });
    </script>
</head>
<body>  

<h2>Welcome</h2> 
<div id="dvMap" style="width: 700px; height: 500px">
</div>
</body>
</html>      

