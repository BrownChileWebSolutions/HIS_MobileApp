@{
    ViewBag.Title = "Index";
}
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="~/css/costom.css" rel="stylesheet" type="text/css" />
<script src="~/Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function () {                   
                $.ajax({
                    url: 'http://localhost:5266/api/map',
                    type: 'GET',
                    dataType: 'json',

                    success: function (data) {
                        var mapOptions = {
                            center: new google.maps.LatLng(data[0].Latitute, data[0].Longitude),
                            zoom: 8,
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                        };

                        var infoWindow = new google.maps.InfoWindow();                        
                        var map = new google.maps.Map(document.getElementById("dvMap"), mapOptions);

                        for (var i = 0; i < data.length; i++)
                        {                                                                                                      
                            var myLatlng = new google.maps.LatLng(data[i].Latitute, data[i].Longitude);

                            var contentString = '<div id="content">' + '<div id="siteNotice">' + '</div>' + data[i].Name + '<div id="bodyContent">' + '<p>' + data[i].Description + '</p>' +
                                                                                    '<p>' + data[i].Address + '</p>' +
                                                                                   '</div>';

                            var infowindow = new google.maps.InfoWindow({
                                content: contentString
                            });

                            var marker = new google.maps.Marker({
                                position: myLatlng,
                                map: map,
                                title: data[i].Name
                            });

                            google.maps.event.addListener(marker, 'click', (function (marker, i) {
                                return function () {
                                    var contentString = '<div id="content1">' + '<div id="divname" style="font-weight:bold;">' + data[i].Name + '</div><div id="bodyContent1">' + '<p>' + data[i].Description + '</p>' +
                                                                                     '<div id="divaddress" style="font-weight:bold;"><p>' + data[i].Address + '</p></div>' +
                                                                                    '</div>';
                                    infowindow.setContent(contentString);
                                    infowindow.open(map, marker);
                                }
                            })(marker, i));
                                                       
                        }
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });            
        });
    </script>
</head>
<body>  

<div style="position:relative;left:-80px;top:-40px;float:right;font-weight:bold;">
           @Html.ActionLink("LogOut", "Index", "Home")
</div>
<div id="dvMap" style="width: 800px; height: 500px;margin-left:250px;margin-top:50px;">
</div>
</body>
</html>      

